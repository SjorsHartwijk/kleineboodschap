<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" type="image/svg+xml" href="assets/images/logo2.svg">
    <link rel="icon" type="image/png" href="assets/images/logo2.png">
    <title>Kalender - Kleine Boodschap Data</title>
    <meta name="theme-color" content="#154666"/>
    <meta property="og:title" content="Kalender - Kleine Boodschap Data">
    <meta property="og:site_name" content="Kleine Boodschap Data">
    <meta property="og:url" content="https://kleineboodschapdata.vercel.app/">
    <meta property="og:description" content="Deze website biedt alle statistieken en visuele data van de podcast Kleine Boodschap">
    <meta property="og:type" content="">
    <meta property="og:image" content="assets/images/opengraph.png">
    <meta name="description"
        content="Geniet je ook wekelijks van Kleine Boodschap en vraag je je wel eens af hoeveel tijd je eraan besteedt? Deze pagina biedt alle statistieken en feiten die je al dan niet nodig hebt.">
    <script src="https://kit.fontawesome.com/396ea48297.js" crossorigin="anonymous"></script>
    <style>
        .navbar{
            margin: 8px 8px 0 8px;
        }
        @media (min-width: 992px) {
            .navbar {
                margin: 30px 30px 0 30px;
            }
        }
    </style>
</head>
<body class="pt-3">
<!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-dark bg-theme fixed-top rounded-3 shadow-sm">
                <div class="container-fluid">
                    <a class="navbar-brand" href="index.html"><img src="assets/images/logo2.png"/ alt="Logo Kleine Boodschap Data"> <span
                            class="d-none d-md-inline-block ">Kleine Boodschap Data</span><span
                            class="d-inline-block d-md-none">KB Data</span></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation"><span
                            class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="afleveringen.html">Afleveringen</a></li>
                            <li class="nav-item"><a class="nav-link" href="kaart.html">Kaart</a></li>
                            <li class="nav-item"><a class="nav-link active" href="kalender.html">Kalender</a></li>
                            <li class="nav-item"><a class="nav-link" href="reeks.html">Reeks</a></li>
                            <li class="nav-item"><a class="nav-link" href="#about">Over</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://bsky.app/profile/kbdata.bsky.social" rel="nofollow" target="_blank"><i class="fa-brands fa-bluesky"></i></a></li>
                            <li class="nav-item"><a class="nav-link" href="https://kleineboodschap.com" rel="nofollow"
                                target="_blank">Kleine Boodschap <i class="fa-solid fa-arrow-up-right-from-square"></i></a></li>
                        </ul>
                    </div>
                </div>
            </nav>
<div class="container mt-5 pt-5">
  <h1>Kalender</h1>
  <p>Bekijk alle ge√Øndexeerde afleveringen van Kleine Boodschap op deze drukte-kalender. Klik op een gekleurde dag om te zien welke aflevering(en) op deze dag zijn gepubliceerd. Hoe donkerder de dag, des te meer afleveringen er zijn gepubliceerd.</p>
  <div class="container">
    <div class="row" id="calendar-grid"></div>
  </div>

  <!-- Tooltip modal -->
  <div class="modal fade" id="dayModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">Afleveringen</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
        <div class="modal-body" id="dayModalBody"></div>
      </div>
    </div>
  </div>
</div>
<footer class="bg-dark py-4 mt-auto">
    <div class="container px-5">
        <div class="row align-items-center justify-content-between flex-column flex-sm-row">
            <div class="col-auto">
                <div class="small m-0 text-white">Copyright &copy; Sjors Hartwijk
                    <script>document.write(new Date().getFullYear())</script>
                </div>
            </div>
            <div class="col-auto">
                <a class="link-light small" href="index.html">Home</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="index.html#about">Over</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="https://bsky.app/profile/kbdata.bsky.social"
                    target="_blank">Bluesky</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="https://sjorshartwijk.nl/" target="_blank">Sjors
                    Hartwijk</a>
                <span class="text-white mx-1">&middot;</span>
                <a class="link-light small" href="https://kleineboodschap.com" target="_blank">Kleine
                    Boodschap</a>
            </div>
        </div>
    </div>
</footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    
    const categoryColors = {
    'nieuws': '#F6CA83',
    'achtergrond': '#7B9F93',
    'reportage': '#4685AE',
    'interview': '#C46868'
    };

    const months = [
      "Januari", "Februari", "Maart", "April",
      "Mei", "Juni", "Juli", "Augustus",
      "September", "Oktober", "November", "December"
    ];

    const daysInMonth = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]; // incl. 29 feb

    fetch("episodes.json")
      .then(res => res.json())
      .then(data => {
        const dayMap = {};

        data.forEach(ep => {
          const [year, month, day] = ep.datum.split("-");
          const key = `${month}-${day}`;
          if (!dayMap[key]) dayMap[key] = [];
          dayMap[key].push(ep);
        });

        const grid = document.getElementById("calendar-grid");

        months.forEach((monthName, mIdx) => {
          const col = document.createElement("div");
          col.className = "col-12 col-md-6 col-lg-3 mb-4";

          const title = document.createElement("h6");
          title.textContent = monthName;
          col.appendChild(title);

          const wrapper = document.createElement("div");
          wrapper.className = "d-flex flex-wrap";

          for (let d = 1; d <= daysInMonth[mIdx]; d++) {
            const key = `${String(mIdx + 1).padStart(2, "0")}-${String(d).padStart(2, "0")}`;
            const episodes = dayMap[key] || [];
            const count = episodes.length;

            const div = document.createElement("div");
            div.className = "calendar-day";
            div.textContent = d;
            if (count > 0) {
              div.setAttribute("data-count", count > 6 ? 6 : count);
              div.addEventListener("click", () => showModal(episodes, d, monthName));
            }
            wrapper.appendChild(div);
          }

          col.appendChild(wrapper);
          grid.appendChild(col);
        });
      });

    function showModal(episodes, day, month) {
      const body = document.getElementById("dayModalBody");
      body.innerHTML = `<p><strong>${day} ${month}</strong></p>`;
      episodes.forEach(ep => {
        const badgeColor = categoryColors[ep.categorie] || '#ccc';

        body.innerHTML += `
          <div class="mb-2">
          Afl.${ep.id}: ${ep.titel}<br>
            <span class="badge text-bg-secondary">${new Date(ep.datum).getFullYear()}</span>&nbsp;<span class="badge" style="background-color: ${badgeColor};">${ep.categorie}</span>
          </div>
        `;
      });

      new bootstrap.Modal(document.getElementById("dayModal")).show();
    }
  </script>
</body>
</html>
